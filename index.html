<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>DYNAMIC DIARY</title>
    <link rel="stylesheet" href="./assets/styles/index.css" />
    <link
      rel="shortcut icon"
      href="./assets/images/icon.ico"
      type="image/x-icon"
    />
    <link rel="stylesheet" href="./assets/styles/main.css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script> -->
    <script type="importmap">
      {
        "imports": {
          "three": "https://esm.sh/three",
          "three/": "https://esm.sh/three/",
          "GLTFLoader": "https://esm.sh/three/examples/jsm/loaders/GLTFLoader.js",
          "OrbitControls": "https://esm.sh/three/examples/jsm/controls/OrbitControls.js"
        }
      }
    </script>
  </head>

  <body>
    <div class="tools flex bg-black/50 fixed z-10 top-0 left-0 p-4 rounded-md">
      <!-- new diary btn -->
      <button
        id="toggleFormBtn"
        title="new diary"
        class="new-diary p-2 rounded-md bg-white h-14 hover:bg-white/35 flex items-center shadow-lg transition-transform duration-300"
      >
        <img
          src="./assets/svgs/add-circle.svg"
          alt="new diary"
          class="h-full"
        />
      </button>
      <!-- search diary btn -->
      <button
        title="search diary"
        class="search-diary p-2 rounded-md bg-white ml-4 h-14 hover:bg-white/35"
      >
        <img
          src="./assets/svgs/search-alt.svg"
          alt="search diary"
          class="h-full"
        />
      </button>
    </div>
    <div
      id="new-diary-form"
      class="fixed z-10 bg-black/80 flex items-center justify-center min-h-screen w-screen transition ease-in-out duration-500 invisible"
    >
      <form
        id="confessionForm"
        class="bg-white p-8 rounded-2xl shadow-2xl w-full max-w-md space-y-6 animate-fade-in"
      >
        <h2
          class="text-3xl flex items-center justify-between font-extrabold text-center text-gray-800 uppercase tracking-wider"
        >
          <span class="text-nowrap">Chia sẻ nhật ký</span
          ><button class="close-btn w-[4rem] mr-[-1rem]">
            <img src="./assets/svgs/close.svg" alt="close btn" class="h-full" />
          </button>
        </h2>

        <div>
          <label for="message" class="block text-gray-700 font-semibold mb-2"
            >Nội dung nhật ký:</label
          >
          <textarea
            id="message"
            name="message"
            rows="6"
            required
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 resize-y"
            placeholder="Viết những điều bạn muốn chia sẻ..."
          ></textarea>
        </div>

        <div>
          <label for="viewers" class="block text-gray-700 font-semibold mb-2"
            >Người được phép xem (email, cách nhau bằng dấu phẩy):</label
          >
          <input
            type="text"
            id="viewers"
            name="viewers"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"
            placeholder="user1@example.com, user2@example.com"
          />
        </div>

        <div>
          <span class="block text-gray-700 font-semibold mb-2"
            >Sử dụng mật khẩu bảo vệ?</span
          >
          <div class="flex items-center space-x-4">
            <label class="flex items-center">
              <input
                type="radio"
                name="usePassword"
                value="yes"
                id="usePasswordYes"
                class="accent-purple-500"
              />
              <span class="ml-2">Có</span>
            </label>
            <label class="flex items-center">
              <input
                type="radio"
                name="usePassword"
                value="no"
                id="usePasswordNo"
                checked
                class="accent-purple-500"
              />
              <span class="ml-2">Không</span>
            </label>
          </div>
        </div>

        <div id="passwordField" class="relative hidden">
          <label for="password" class="block text-gray-700 font-semibold mb-2"
            >Mật khẩu bảo vệ:</label
          >
          <input
            type="password"
            id="password"
            name="password"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 pr-10"
          />
          <button
            type="button"
            id="togglePassword"
            class="absolute top-9 right-3 text-sm text-purple-600 hover:underline focus:outline-none"
          >
            Hiện
          </button>
        </div>

        <div id="errorMsg" class="text-red-500 text-sm hidden">
          Vui lòng nhập mật khẩu.
        </div>

        <button
          type="submit"
          class="w-full bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors font-semibold"
        >
          Gửi
        </button>
      </form>
    </div>
    <!-- Nút người dùng -->
    <div class="fixed right-4 top-4 inline-block text-left z-10">
      <button
        id="userMenuButton"
        class="flex items-center space-x-2 bg-white px-4 py-2 rounded-md shadow hover:bg-gray-100 focus:outline-none"
      >
        <img
          src="./assets/images/user-avatar.png"
          alt="User Avatar"
          class="w-8 h-8 rounded-full"
        />
        <span class="text-gray-700 font-medium">Người dùng</span>
        <svg
          class="w-4 h-4 text-gray-600"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M19 9l-7 7-7-7"
          />
        </svg>
      </button>

      <!-- Dropdown menu -->
      <div
        id="userDropdown"
        class="origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 hidden transition transform scale-95 opacity-0"
      >
        <div
          class="py-1"
          role="menu"
          aria-orientation="vertical"
          aria-labelledby="userMenuButton"
        >
          <a
            href="#"
            class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
            role="menuitem"
            >Profile</a
          >
          <a
            href="#"
            class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
            role="menuitem"
            >Settings</a
          >
          <a
            href="#"
            class="block px-4 py-2 text-sm text-red-600 hover:bg-gray-100"
            role="menuitem"
            >Logout</a
          >
        </div>
      </div>
    </div>

    <div id="globeViz"></div>

    <script type="module" src="./assets/scripts/index.js"></script>
    <script src="./assets/scripts/diary.js"></script>
    <script src="./assets/scripts/user.js"></script>
  </body>
</html>
